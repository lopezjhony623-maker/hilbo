<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hilbocril - Cat√°logo de Productos</title>
    
    <!-- Importar Firebase -->
    <script type="module">
        // Importar funciones necesarias del SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
        import { getDatabase, ref, set, push } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

        // Configuraci√≥n de Firebase
        const firebaseConfig = {
  apiKey: "AIzaSyBAUsFSKZUxI66LMGvGZPl4WfJDHhXjFcY",
  authDomain: "pedidos-b28f5.firebaseapp.com",
  databaseURL: "https://pedidos-b28f5-default-rtdb.firebaseio.com",
  projectId: "pedidos-b28f5",
  storageBucket: "pedidos-b28f5.firebasestorage.app",
  messagingSenderId: "358506549303",
  appId: "1:358506549303:web:fb4ea5eeb9305d166e2fb2"
};


        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Hacer disponible para el resto del c√≥digo
        window.firebaseApp = app;
        window.firebaseDB = db;
        window.firebaseRef = ref;
        window.firebaseSet = set;
        window.firebasePush = push;
    </script>
    
    <style>
        /* Estilos existentes se mantienen igual */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f6fa 0%, #e8ecee 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #2d17f3 0%, #2acdf6 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Buscador */
        .buscador-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .buscador {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .buscador-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .buscador-input:focus {
            border-color: #ed37da;
        }

        /* Grid de Productos */
        .productos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .producto-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .producto-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.2);
            border-color: #2d96f8;
        }

        .producto-imagen-container {
            width: 100%;
            height: 180px;
            border-radius: 10px;
            margin: 0 auto 15px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #54daf5;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
        }

        .producto-imagen {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.3s ease;
            padding: 10px;
        }

        .producto-card:hover .producto-imagen {
            transform: scale(1.05);
        }

        .producto-nombre {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
        }

        .producto-precio {
            font-size: 1.8rem;
            font-weight: bold;
            color: #27ae60;
            margin: 15px 0;
        }

        .btn-agregar {
            background: #3e25f6;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
            margin-top: auto;
        }

        .btn-agregar:hover {
            background: #A0522D;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        /* Carrito Flotante */
        .carrito-flotante {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #8B4513;
            color: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(139, 69, 19, 0.4);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .carrito-flotante:hover {
            transform: scale(1.1);
            background: #A0522D;
        }

        .carrito-icono {
            position: relative;
            font-size: 1.8rem;
        }

        .carrito-contador {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* Panel del Carrito */
        .carrito-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 20px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1001;
            display: flex;
            flex-direction: column;
        }

        .carrito-panel.abierto {
            right: 0;
        }

        .carrito-header {
            background: #8B4513;
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cerrar-carrito {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .carrito-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .carrito-items {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .carrito-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f1f3f4;
        }

        .item-info h4 {
            margin-bottom: 5px;
            font-size: 14px;
        }

        .item-cantidad {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-cantidad {
            background: #8B4513;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .btn-eliminar {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 10px;
            margin-left: 5px;
        }

        .carrito-total {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }

        .total-precio {
            font-size: 1.5rem;
            font-weight: bold;
            color: #27ae60;
        }

        /* Bot√≥n Cancelar Pedido */
        .btn-cancelar {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            width: 100%;
            margin-bottom: 15px;
            transition: background 0.3s ease;
        }

        .btn-cancelar:hover {
            background: #c0392b;
        }

        /* Formulario de Reserva */
        .form-reserva {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 14px;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }

        .form-group input:focus, .form-group textarea:focus {
            border-color: #8B4513;
            outline: none;
        }

        .btn-reservar {
            background: #27ae60;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            transition: background 0.3s ease;
        }

        .btn-reservar:hover {
            background: #219a52;
        }

        .btn-reservar:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

        /* Overlay para el carrito */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .overlay.activo {
            display: block;
        }

        /* Modal de Confirmaci√≥n */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1002;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .modal-icon {
            font-size: 4rem;
            color: #27ae60;
            margin-bottom: 20px;
        }

        .whatsapp-btn {
            background: #25D366;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-top: 15px;
            text-decoration: none;
            display: inline-block;
            transition: background 0.3s ease;
        }

        .whatsapp-btn:hover {
            background: #128C7E;
        }

        /* Notificaciones Flotantes */
        .notificacion {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border-left: 4px solid #27ae60;
            z-index: 1003;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
        }

        .notificacion.mostrar {
            transform: translateX(0);
        }

        .notificacion.exito {
            border-left-color: #27ae60;
        }

        .notificacion.error {
            border-left-color: #e74c3c;
        }

        .notificacion.info {
            border-left-color: #3498db;
        }

        .notificacion-contenido {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notificacion-icono {
            font-size: 1.5rem;
        }

        .notificacion.exito .notificacion-icono {
            color: #27ae60;
        }

        .notificacion.error .notificacion-icono {
            color: #e74c3c;
        }

        .notificacion.info .notificacion-icono {
            color: #3498db;
        }

        .notificacion-texto h4 {
            margin: 0;
            font-size: 14px;
            color: #2c3e50;
        }

        .notificacion-texto p {
            margin: 5px 0 0 0;
            font-size: 12px;
            color: #7f8c8d;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .productos-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .carrito-panel {
                width: 100%;
                right: -100%;
            }
            
            .carrito-flotante {
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .buscador {
                flex-direction: column;
            }
            
            .buscador-input {
                width: 100%;
            }

            .notificacion {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }

        @media (max-width: 480px) {
            .productos-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 10px;
            }
        }

        /* Animaciones */
        @keyframes agregarAlCarrito {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .agregado {
            animation: agregarAlCarrito 0.5s ease;
        }

        .producto-oculto {
            display: none !important;
        }

        /* Estilos para im√°genes de productos */
        .imagen-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1ff4ed 0%, #2456fa 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgb(215, 216, 215);
            font-size: 3rem;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header" style="
        display: flex; 
        align-items: center; 
        justify-content: center; 
        gap: 15px; 
        padding: 15px; 
        text-align: center;
        flex-wrap: wrap;">
        
        <!-- Logo -->
        <img src="img/HILBO.png" alt="Hilbocril - Productos Textiles" 
             style="width: 100%; max-width: 150px; height: auto; border-radius: 10px;">
        
        <!-- Texto al lado -->
        <h1 style="
            color: #ffffff; 
            font-size: 1.8rem; 
            font-weight: bold; 
            margin: 0;">
            HILBOCRIL CAT√ÅLOGO
        </h1>
    </div>
    
        <!-- Buscador -->
        <div class="buscador-container">
            <div class="buscador">
                <input type="text" class="buscador-input" id="buscadorInput" placeholder="üîç Buscar productos por nombre...">
            </div>
        </div>

        <!-- Grid de Productos -->
        <div class="productos-grid" id="productosGrid">
            <!-- Los productos se cargan din√°micamente -->
        </div>
    </div>

    <!-- Carrito Flotante -->
    <div class="carrito-flotante" onclick="toggleCarrito()">
        <div class="carrito-icono">
            üõí
            <div class="carrito-contador" id="carritoContador">0</div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay" onclick="toggleCarrito()"></div>

    <!-- Panel del Carrito -->
    <div class="carrito-panel" id="carritoPanel">
        <div class="carrito-header">
            <h3>üõí Mi Carrito de Compras</h3>
            <button class="cerrar-carrito" onclick="toggleCarrito()">√ó</button>
        </div>
        
        <div class="carrito-content">
            <!-- Items del Carrito -->
            <div class="carrito-items" id="carritoItems">
                <p style="text-align: center; color: #7f8c8d; padding: 20px;">
                    Tu carrito est√° vac√≠o
                </p>
            </div>

            <!-- Bot√≥n Cancelar Pedido -->
            <button class="btn-cancelar" id="btnCancelar" onclick="cancelarPedido()" style="display: none;">
                ‚ùå Cancelar Pedido
            </button>

            <!-- Total -->
            <div class="carrito-total">
                <p>Total a pagar:</p>
                <div class="total-precio" id="totalCarrito">Bs. 0</div>
            </div>

            <!-- Formulario de Reserva -->
            <div class="form-reserva">
                <h4 style="margin-bottom: 15px; color: #8B4513;">Completar Reserva</h4>
                
                <div class="form-group">
                    <label for="nombreCliente">Tu Nombre:</label>
                    <input type="text" id="nombreCliente" placeholder="Nombre completo" required>
                </div>

                <div class="form-group">
                    <label for="carnetCliente">Tu N√∫mero de Carnet:</label>
                    <input type="text" id="carnetCliente" placeholder="Ej: 12345678" required>
                </div>

                <div class="form-group">
                    <label for="celularCliente">Tu Celular:</label>
                    <input type="tel" id="celularCliente" placeholder="Ej: 71123456" required>
                </div>
                
                <div class="form-group">
                    <label for="fechaEntrega">Fecha de Entrega:</label>
                    <input type="date" id="fechaEntrega" required>
                </div>

                <div class="form-group">
                    <label for="notasReserva">Notas adicionales:</label>
                    <textarea id="notasReserva" rows="3" placeholder="Direcci√≥n de entrega, observaciones, etc..."></textarea>
                </div>

                <button class="btn-reservar" id="btnReservar" onclick="procesarReserva()" disabled>
                    üìã Confirmar Reserva
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmaci√≥n -->
    <div class="modal" id="modalConfirmacion">
        <div class="modal-content">
            <div class="modal-icon">‚úÖ</div>
            <h3 style="margin-bottom: 15px; color: #27ae60;">¬°Reserva Exitosa!</h3>
            <p id="mensajeConfirmacion" style="margin-bottom: 20px;">
                Tu reserva ha sido procesada correctamente.
            </p>
            <p style="margin-bottom: 20px; font-size: 14px; color: #666;">
                Ahora puedes enviar los detalles por WhatsApp para confirmar tu pedido.
            </p>
            <button class="btn-reservar" onclick="cerrarModal()" style="margin-bottom: 10px;">
                Continuar Comprando
            </button>
            <a class="whatsapp-btn" id="whatsappLink" target="_blank" onclick="limpiarTodo()">
                üí¨ Enviar por WhatsApp
            </a>
        </div>
    </div>

    <script>
        // Base de datos de productos con im√°genes
        const productos = [
            { 
                id: 1, 
                nombre: "PAQUETE CONO ALPACA 2/11", 
                precio: 180, 
                imagen: "img/ALPACRIL/ALPACA 2-11 CONOS.png"
            },
            { 
                id: 2, 
                nombre: "PAQUETE OBILLO ALPAQUITA 2/11", 
                precio: 170, 
                imagen: "img/ALPACRIL/ALPAQUITA 2-11.png"
            },
            { 
                id: 3, 
                nombre: "PAQUETE CONO ALPACA 2/5", 
                precio: 180, 
                imagen: "img/ALPACRIL/CONO ALPACA 2-5.png"
            },
            { 
                id: 4, 
                nombre: "PAQUETE OBILLO SUPER FINA 2/18", 
                precio: 175, 
                imagen: "img/ALPACRIL/OBILLO SUPER FINA 2-18.png"
            },
            { 
                id: 5, 
                nombre: "PAQUETE OBILLO ALPACA 2/5", 
                precio: 170, 
                imagen: "img/ALPACRIL/OBILLO ALPACA 2-5.png"
            },
            { 
                id: 6, 
                nombre: "PAQUETE CONO ARCO IRIS GRUESO 2/3 4 COLORES AMARILLO", 
                precio: 150, 
                imagen: "img/DOMESTICOS/CONO ARCO IRIS GRUESO 2-3 CUATRO COLORES AMARILLO.png"
            },
            { 
                id: 7, 
                nombre: "PAQUETE CONO ARCO IRIS GRUESO 2/3 4 COLORES ROJO", 
                precio: 150, 
                imagen: "img/DOMESTICOS/CONO ARCO IRIS GRUESO 2-3 CUATRO COLORES ROJO.png"
            },
            { 
                id: 8, 
                nombre: "PAQUETE CONO ARCO IRIS GRUESO 2/3 4 COLORES VERDE", 
                precio: 150, 
                imagen:  "img/DOMESTICOS/CONO ARCO IRIS GRUESO 2-3 CUATRO COLORES VERDE.png"
            },
            { 
                id: 9, 
                nombre:  "PAQUETE CONO ARCO IRIS GRUESO 2/3 4 COLORES CELESTE", 
                precio: 150, 
                imagen:  "img/DOMESTICOS/CONO ARCO IRIS GRUESO 2-3 CUATRO COLORES CELESTE.png"
            },
            { 
                id: 10, 
                nombre: "PAQUETE CONO ARCO IRIS GRUESO 2/3 4 COLORES AZUL", 
                precio: 150, 
                imagen: "img/DOMESTICOS/CONO ARCO IRIS GRUESO 2-3 CUATRO COLORES AZUL.png"
            },
            { 
                id: 11, 
                nombre: "PAQUETE CONO LUCERO GRUESO 3/5 AMARILLO", 
                precio: 160, 
                imagen: "img/DOMESTICOS/LUCERO GRUESO CONO 3-5 AMARILLO.png"
            },
            { 
                id: 12, 
                nombre: "PAQUETE CONO LUCERO GRUESO 3/5 ROJO",
                precio: 160, 
                imagen: "img/DOMESTICOS/LUCERO GRUESO CONO 3-5 ROJO.png"
            },
            { 
                id: 13, 
                nombre: "PAQUETE CONO LUCERO GRUESO 3/5 VERDE", 
                precio: 160, 
                imagen: "img/DOMESTICOS/LUCERO GRUESO CONO 3-5 VERDE.png"
            },
            { 
                id: 14, 
                nombre: "PAQUETE CONO LUCERO GRUESO 3/5 CELESTE",
                precio: 160, 
                imagen: "img/DOMESTICOS/LUCERO GRUESO CONO 3-5 CELESTE.png"
            },
            { 
                id: 15, 
                nombre: "PAQUETE CONO LUCERO GRUESO 3/5 AZUL",
                precio: 160, 
                imagen: "img/DOMESTICOS/LUCERO GRUESO CONO 3-5 AZUL.png"
            },
            { 
                id: 16, 
                nombre: "PAQUETE OBILLO LUZ BEBE 2/8 AMARILLO", 
                precio: 155, 
                imagen: "img/DOMESTICOS/LUZ BEBE 2-8 AMARILLO.png"
            },
            { 
                id: 17, 
                nombre: "PAQUETE OBILLO LUZ BEBE 2/8 ROJO",  
                precio: 155, 
                imagen: "img/DOMESTICOS/LUZ BEBE 2-8 ROJO.png"
            },
            { 
                id: 18, 
                nombre:  "PAQUETE OBILLO LUZ BEBE 2/8 CELESTE",  
                precio: 155, 
                imagen: "img/DOMESTICOS/LUZ BEBE 2-8 CELESTE.png"
            },
            { 
                id: 19, 
                nombre:  "PAQUETE OBILLO LUZ BEBE 2/8 VERDE",
                precio: 155, 
                imagen: "img/DOMESTICOS/LUZ BEBE 2-8 VERDE.png"
            },
            { 
                id: 20, 
                nombre: "PAQUETE OBILLO LUZ BEBE 2/8 AZUL",
                precio: 155, 
                imagen: "img/DOMESTICOS/LUZ BEBE 2-8 AZUL.png"
            },

            { 
                id: 21, 
                nombre: "MADEJA 3/15 AMARILLO",
                precio: 130, 
                imagen: "img/DOMESTICOS/MADEJA 3-15 AMARILLO.png"
            },

            { 
                id: 22, 
                nombre: "MADEJA 3/15 AZUL",
                precio: 130, 
                imagen: "img/DOMESTICOS/MADEJA 3-15 AZUL.png"
            },

            { 
                id: 23, 
                nombre: "MADEJA 3/15 CELESTE",
                precio: 130, 
                imagen: "img/DOMESTICOS/MADEJA 3-15 CELESTE.png"
            },

            { 
                id: 24, 
                nombre: "MADEJA 3/15 VERDE CLARO",
                precio: 130, 
                imagen: "img/DOMESTICOS/MADEJA 3-15 VERDE CLARO.png"
            },

            { 
                id: 25, 
                nombre: "MADEJA 3/15 ROJO",
                precio: 130, 
                imagen: "img/DOMESTICOS/MADEJA 3-15 ROJO.png"
            },
            
            { 
                id: 26, 
                nombre: "PAQUETE OBILLO MILAN 2/10 AMARILLO",
                precio: 145, 
                imagen: "img/DOMESTICOS/MILAN 2-10 AMARILLO.png"
            },

             { 
                id: 27, 
                nombre: "PAQUETE OBILLO MILAN 2/10 VERDE",
                precio: 145, 
                imagen: "img/DOMESTICOS/MILAN 2-10 VERDE.png"
            },
             
             { 
                id: 28, 
                nombre: "PAQUETE OBILLO MILAN 2/10 ROJO",
                precio: 145, 
                imagen: "img/DOMESTICOS/MILAN 2-10 ROJO.png"
            },

             { 
                id: 29, 
                nombre: "PAQUETE OBILLO MILAN 2/10 AZUL",
                precio: 145, 
                imagen: "img/DOMESTICOS/MILAN 2-10 AZUL.png"
            },

             { 
                id: 30, 
                nombre: "PAQUETE OBILLO MILAN 2/10 CELESTE",
                precio: 145, 
                imagen: "img/DOMESTICOS/MILAN 2-10 CELESTE.png"
            },

            { 
                id: 31, 
                nombre: "PAQUETE OBILLO ARCO IRIS GRUESO 4 COLORES 2/3 AMARILLO",
                precio: 155, 
                imagen: "img/DOMESTICOS/OBILLO ARCO IRIS GRUESO 4COLR 2-3 AMARILLO.png"
            },

             { 
                id: 32, 
                nombre: "PAQUETE OBILLO ARCO IRIS GRUESO 4 COLORES 2/3 CELESTE",
                precio: 155, 
                imagen: "img/DOMESTICOS/OBILLO ARCO IRIS GRUESO 4COLR 2-3 CELESTE.png"
            },
  
             { 
                id: 33, 
                nombre: "PAQUETE OBILLO ARCO IRIS GRUESO 4 COLORES 2/3 LILA",
                precio: 155, 
                imagen: "img/DOMESTICOS/OBILLO ARCO IRIS GRUESO 4COLR 2-3 LILA.png"
            },

            
             { 
                id: 34, 
                nombre: "PAQUETE OBILLO ARCO IRIS GRUESO 4 COLORES 2/3 VERDE",
                precio: 155, 
                imagen: "img/DOMESTICOS/OBILLO ARCO IRIS GRUESO 4COLR 2-3 VERDE.png"
            },

             { 
                id: 35, 
                nombre: "PAQUETE OBILLO LUCERO DELGADO 3/8 BLANCO",
                precio: 164, 
                imagen: "img/DOMESTICOS/OBILLO LUCERO DELGADO 3-8 BLANCO.png"
            },

           
             { 
                id: 36, 
                nombre: "PAQUETE OBILLO LUCERO GRUESO 2/5 AMARILLO",
                precio: 162, 
                imagen: "img/DOMESTICOS/OBILLO LUCERO GRUESO 2-5 AMARILLO.png"
            },

             { 
                id: 37, 
                nombre: "PAQUETE OBILLO LUCERO GRUESO 2/5 VERDE",
                precio: 162, 
                imagen: "img/DOMESTICOS/OBILLO LUCERO GRUESO 2-5 VERDE.png"
            },

             { 
                id: 38, 
                nombre: "PAQUETE OBILLO LUCERO GRUESO 2/5 ROJO",
                precio: 162, 
                imagen: "img/DOMESTICOS/OBILLO LUCERO GRUESO 2-5 ROJO.png"
            },

             { 
                id: 39, 
                nombre: "PAQUETE OBILLO LUCERO GRUESO 2/5 AZUL",
                precio: 162, 
                imagen: "img/DOMESTICOS/OBILLO LUCERO GRUESO 2-5 AZUL.png"
            },

            { 
                id: 40, 
                nombre: "PAQUETE OBILLO LUCERO GRUESO 2/5 CELESTE",
                precio: 162, 
                imagen: "img/DOMESTICOS/OBILLO LUCERO GRUESO 2-5 CELES.png"
            },


            { 
                id: 41, 
                nombre: "PAQUETE CONO AGUAYO 2/32 AMARILLO",
                precio: 175, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO 2-32 AMARILLO.png"
            },

            { 
                id: 42, 
                nombre: "PAQUETE CONO AGUAYO 2/32 ROJO",
                precio: 175, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO 2-32 ROJO.png"
            },

            { 
                id: 43, 
                nombre: "PAQUETE CONO AGUAYO 2/32 VERDE",
                precio: 175, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO 2-32 VERDE.png"
            },

            { 
                id: 44, 
                nombre: "PAQUETE CONO AGUAYO 2/32 CELESTE",
                precio: 175, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO 2-32 CELESTE.png"
            },

            { 
                id: 45, 
                nombre: "PAQUETE CONO AGUAYO 2/32 AZUL",
                precio: 175, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO 2-32 AZUL.png"
            },

            { 
                id: 46, 
                nombre: "PAQUETE CONO AGUAYO GRUESO 4/32 VERDE",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO GRUESO 4-32 VERDE.png"
            },

             { 
                id: 47, 
                nombre: "PAQUETE CONO AGUAYO GRUESO 4/32 AMARILLO",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO GRUESO 4-32 AMARILLO.png"
            },

             { 
                id: 48, 
                nombre: "PAQUETE CONO AGUAYO GRUESO 4/32 ROJO",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO GRUESO 4-32 ROJO.png"
            },

             { 
                id: 49, 
                nombre: "PAQUETE CONO AGUAYO GRUESO 4/32 AZUL",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO GRUESO 4-32 AZUL.png"
            },

            { 
                id: 50, 
                nombre: "PAQUETE CONO AGUAYO GRUESO 4/32 CELESTE",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO GRUESO 4-32 CELESTE.png"
            },

            { 
                id: 51, 
                nombre: "PAQUETE CONO AGUAYO MAS TORCION 2/30 ROJO",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO MAS TORCION 2-30 ROJO.png"
            },

             { 
                id: 52, 
                nombre: "PAQUETE CONO AGUAYO MAS TORCION 2/30 AMARILLO",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO MAS TORCION 2-30 AMARILLO.png"
            },

             { 
                id: 53, 
                nombre: "PAQUETE CONO AGUAYO MAS TORCION 2/30 VERDE",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO MAS TORCION 2-30 VERDE.png"
            },

             { 
                id: 54, 
                nombre: "PAQUETE CONO AGUAYO MAS TORCION 2/30 CELESTE",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO MAS TORCION 2-30 CELESTE.png"
            },

             { 
                id: 55, 
                nombre: "PAQUETE CONO AGUAYO MAS TORCION 2/30 AZUL",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO MAS TORCION 2-30 AZUL.png"
            },

            { 
                id: 56, 
                nombre: "PAQUETE CONO AGUAYO MAS TORCION 2/30 ROSADO",
                precio: 170, 
                imagen: "img/INDUSTRIAL/CONO AGUAYO MAS TORCION 2-30 ROSADO.png"
            },

            { 
                id: 57, 
                nombre: "PAQUETE CONO CHOMPERO 2/32 ROJO",
                precio: 174, 
                imagen: "img/INDUSTRIAL/CONO CHOMPERO 2-32 ROJO.png"
            },

             { 
                id: 58, 
                nombre: "PAQUETE CONO CHOMPERO 2/32 AMARILLO",
                precio: 174, 
                imagen: "img/INDUSTRIAL/CONO CHOMPERO 2-32 AMARILLO.png"
            },

             { 
                id: 59, 
                nombre: "PAQUETE CONO CHOMPERO 2/32 VERDE",
                precio: 174, 
                imagen: "img/INDUSTRIAL/CONO CHOMPERO 2-32 VERDE.png"
            },

            { 
                id: 60, 
                nombre: "PAQUETE CONO CHOMPERO 2/32 AZUL",
                precio: 174, 
                imagen: "img/INDUSTRIAL/CONO CHOMPERO 2-32 AZUL.png"
            },

            { 
                id: 61, 
                nombre: "PAQUETE CONO CHOMPERO 2/32 CELESTE",
                precio: 174, 
                imagen: "img/INDUSTRIAL/CONO CHOMPERO 2-32 CELESTE.png"
            },

            { 
                id: 62, 
                nombre: "PAQUETE CONO CHOMPERO 2/32 GRIS",
                precio: 174, 
                imagen: "img/INDUSTRIAL/CONO CHOMPERO 2-32 GRIS.png"
            },

            { 
                id: 63, 
                nombre: "PAQUETE CONO KALTEX 2/32 AMARILLO",
                precio: 169, 
                imagen: "img/INDUSTRIAL/CONO KALTEX 2-32 AMARILLO.png"
            },

            { 
                id: 64, 
                nombre: "PAQUETE CONO KALTEX 2/32 ROJO",
                precio: 169, 
                imagen: "img/INDUSTRIAL/CONO KALTEX 2-32 ROJO.png"
            },
            { 
                id: 65, 
                nombre: "PAQUETE CONO KALTEX 2/32 VERDE",
                precio: 169, 
                imagen: "img/INDUSTRIAL/CONO KALTEX 2-32 VERDE.png"
            },

            { 
                id: 66, 
                nombre: "PAQUETE CONO KALTEX 2/32 CELESTE",
                precio: 169, 
                imagen: "img/INDUSTRIAL/CONO KALTEX 2-32 CELESTE.png"
            },

            { 
                id: 67, 
                nombre: "PAQUETE CONO KALTEX 2/32 AZUL",
                precio: 169, 
                imagen: "img/INDUSTRIAL/CONO KALTEX 2-32 AZUL.png"
            },

            { 
                id: 68, 
                nombre: "PAQUETE CONO KALTEX 2/32 NEGRO",
                precio: 169, 
                imagen: "img/INDUSTRIAL/CONO KALTEX 2-32 NEGRO.png"
            }

          
    
        ];

        // Inicializar carrito vac√≠o
        let carrito = [];

        // Inicializar productos en grid
        function inicializarProductos() {
            const grid = document.getElementById('productosGrid');
            grid.innerHTML = productos.map(producto => crearCardProducto(producto)).join('');
        }

        function crearCardProducto(producto) {
            return `
                <div class="producto-card" data-nombre="${producto.nombre.toLowerCase()}">
                    <div class="producto-imagen-container">
                        <img src="${producto.imagen}" alt="${producto.nombre}" class="producto-imagen" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjOEI0NTEzIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+8J+NtTwvdGV4dD48L3N2Zz4='">
                    </div>
                    <div class="producto-nombre">${producto.nombre}</div>
                    <div class="producto-precio">Bs. ${producto.precio}</div>
                    <button class="btn-agregar" onclick="agregarAlCarrito(${producto.id})">
                        Agregar al Carrito
                    </button>
                </div>
            `;
        }

        // Funciones de b√∫squeda
        function buscarProductos() {
            const termino = document.getElementById('buscadorInput').value.toLowerCase().trim();
            const productosCards = document.querySelectorAll('.producto-card');
            
            productosCards.forEach(card => {
                const nombre = card.dataset.nombre;
                if (nombre.includes(termino) || termino === '') {
                    card.classList.remove('producto-oculto');
                } else {
                    card.classList.add('producto-oculto');
                }
            });
        }

        // Funciones del Carrito
        function agregarAlCarrito(productoId) {
            const producto = productos.find(p => p.id === productoId);
            
            const itemExistente = carrito.find(item => item.id === productoId);

            if (itemExistente) {
                itemExistente.cantidad++;
            } else {
                carrito.push({
                    id: producto.id,
                    nombre: producto.nombre,
                    precio: producto.precio,
                    cantidad: 1,
                    imagen: producto.imagen
                });
            }

            // Animaci√≥n sin abrir el carrito
            event.target.classList.add('agregado');
            setTimeout(() => event.target.classList.remove('agregado'), 500);

            actualizarCarrito();
            guardarEnLocalStorage();

            // Mostrar notificaci√≥n flotante
            mostrarNotificacion('Producto agregado', `${producto.nombre} se agreg√≥ al carrito`, 'exito');
        }

        function actualizarCarrito() {
            const carritoItems = document.getElementById('carritoItems');
            const carritoContador = document.getElementById('carritoContador');
            const totalCarrito = document.getElementById('totalCarrito');
            const btnReservar = document.getElementById('btnReservar');
            const btnCancelar = document.getElementById('btnCancelar');

            if (carrito.length === 0) {
                carritoItems.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 20px;">Tu carrito est√° vac√≠o</p>';
                carritoContador.textContent = '0';
                totalCarrito.textContent = 'Bs. 0';
                btnReservar.disabled = true;
                btnCancelar.style.display = 'none';
                return;
            }

            let total = 0;
            let html = '';

            carrito.forEach((item, index) => {
                const subtotal = item.precio * item.cantidad;
                total += subtotal;

                html += `
                    <div class="carrito-item">
                        <div class="item-info">
                            <h4>${item.nombre}</h4>
                            <p style="font-size: 12px; color: #27ae60;">Bs. ${item.precio} c/u</p>
                        </div>
                        <div class="item-cantidad">
                            <button class="btn-cantidad" onclick="cambiarCantidad(${index}, -1)">-</button>
                            <span style="font-weight: bold;">${item.cantidad}</span>
                            <button class="btn-cantidad" onclick="cambiarCantidad(${index}, 1)">+</button>
                            <button class="btn-eliminar" onclick="eliminarDelCarrito(${index})">‚úï</button>
                        </div>
                    </div>
                `;
            });

            carritoItems.innerHTML = html;
            carritoContador.textContent = carrito.reduce((sum, item) => sum + item.cantidad, 0);
            totalCarrito.textContent = `Bs. ${total}`;
            btnReservar.disabled = false;
            btnCancelar.style.display = 'block';
        }

        function cambiarCantidad(index, cambio) {
            const item = carrito[index];
            if (item) {
                item.cantidad += cambio;
                if (item.cantidad <= 0) {
                    eliminarDelCarrito(index);
                } else {
                    actualizarCarrito();
                    guardarEnLocalStorage();
                }
            }
        }

        function eliminarDelCarrito(index) {
            const productoEliminado = carrito[index];
            carrito.splice(index, 1);
            actualizarCarrito();
            guardarEnLocalStorage();
            
            // Mostrar notificaci√≥n
            mostrarNotificacion('Producto eliminado', `${productoEliminado.nombre} se elimin√≥ del carrito`, 'error');
        }

        // Funci√≥n para cancelar todo el pedido
        function cancelarPedido() {
            if (carrito.length === 0) {
                mostrarNotificacion('Carrito vac√≠o', 'No hay productos para cancelar', 'info');
                return;
            }

            // Confirmar cancelaci√≥n
            if (confirm('¬øEst√°s seguro de que quieres cancelar todo el pedido?')) {
                const cantidadProductos = carrito.reduce((sum, item) => sum + item.cantidad, 0);
                carrito = [];
                actualizarCarrito();
                localStorage.removeItem('carritoHilbocril');
                
                // Mostrar notificaci√≥n similar a las dem√°s
                mostrarNotificacion('Pedido cancelado', `Se eliminaron ${cantidadProductos} productos del carrito`, 'error');
                
                // Cerrar el carrito si est√° abierto
                if (document.getElementById('carritoPanel').classList.contains('abierto')) {
                    toggleCarrito();
                }
            }
        }

        function guardarEnLocalStorage() {
            localStorage.setItem('carritoHilbocril', JSON.stringify(carrito));
        }

        // Funciones del Carrito Flotante
        function toggleCarrito() {
            const panel = document.getElementById('carritoPanel');
            const overlay = document.getElementById('overlay');
            panel.classList.toggle('abierto');
            overlay.classList.toggle('activo');
        }

        // Notificaciones flotantes
        function mostrarNotificacion(titulo, mensaje, tipo = 'info') {
            // Crear elemento de notificaci√≥n
            const notificacion = document.createElement('div');
            notificacion.className = `notificacion ${tipo}`;
            notificacion.innerHTML = `
                <div class="notificacion-contenido">
                    <div class="notificacion-icono">
                        ${tipo === 'exito' ? '‚úÖ' : tipo === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
                    </div>
                    <div class="notificacion-texto">
                        <h4>${titulo}</h4>
                        <p>${mensaje}</p>
                    </div>
                </div>
            `;
            
            // Agregar al body
            document.body.appendChild(notificacion);
            
            // Mostrar con animaci√≥n
            setTimeout(() => {
                notificacion.classList.add('mostrar');
            }, 100);
            
            // Ocultar despu√©s de 3 segundos
            setTimeout(() => {
                notificacion.classList.remove('mostrar');
                setTimeout(() => {
                    document.body.removeChild(notificacion);
                }, 300);
            }, 3000);
        }

        // Procesar Reserva y enviar a Firebase
        function procesarReserva() {
            const nombre = document.getElementById('nombreCliente').value.trim();
            const carnet = document.getElementById('carnetCliente').value.trim();
            const celular = document.getElementById('celularCliente').value.trim();
            const fechaEntrega = document.getElementById('fechaEntrega').value;
            const notas = document.getElementById('notasReserva').value.trim();

            if (!nombre || !carnet || !celular || !fechaEntrega) {
                mostrarNotificacion('Campos incompletos', 'Por favor completa todos los campos obligatorios', 'error');
                return;
            }

            if (carrito.length === 0) {
                mostrarNotificacion('Carrito vac√≠o', 'Agrega productos al carrito antes de reservar', 'error');
                return;
            }

            const reserva = {
                nombre: nombre,
                carnet: carnet,
                celular: celular,
                fechaEntrega: fechaEntrega,
                notas: notas,
                productos: carrito,
                total: carrito.reduce((sum, item) => sum + (item.precio * item.cantidad), 0),
                fechaReserva: new Date().toLocaleDateString('es-ES'),
                timestamp: new Date().toISOString()
            };

            // Guardar en Firebase
            guardarReservaEnFirebase(reserva);
        }

        // Funci√≥n para guardar en Firebase usando el carnet como ID principal
        function guardarReservaEnFirebase(reserva) {
            // Verificar que Firebase est√© disponible
            if (!window.firebaseSet || !window.firebaseRef || !window.firebaseDB) {
                mostrarNotificacion('Error de conexi√≥n', 'No se pudo conectar con la base de datos', 'error');
                return;
            }

            // Usar el carnet como identificador principal
            const carnet = reserva.carnet;
            
            // Crear una referencia usando el carnet como clave
            const reservaRef = window.firebaseRef(window.firebaseDB, 'reservas/' + carnet);
            
            // Guardar la reserva en Firebase
            window.firebaseSet(reservaRef, reserva)
                .then(() => {
                    // √âxito al guardar
                    mostrarNotificacion('Reserva guardada', 'Tu reserva se guard√≥ correctamente en la base de datos', 'exito');
                    enviarAWhatsApp(reserva);
                })
                .catch((error) => {
                    // Error al guardar
                    console.error('Error al guardar en Firebase:', error);
                    mostrarNotificacion('Error al guardar', 'No se pudo guardar la reserva en la base de datos', 'error');
                });
        }

        function enviarAWhatsApp(reserva) {
            // Formatear mensaje para WhatsApp SIN s√≠mbolos *
            let mensaje = `¬°Hola! Quiero hacer una reserva:\n\n`;
            mensaje += `Cliente: ${reserva.nombre}\n`;
            mensaje += `Carnet: ${reserva.carnet}\n`;
            mensaje += `Celular: ${reserva.celular}\n`;
            mensaje += `Fecha de Entrega: ${reserva.fechaEntrega}\n\n`;
            mensaje += `Productos:\n`;
            
            reserva.productos.forEach(item => {
                mensaje += `‚Ä¢ ${item.nombre} - ${item.cantidad} x Bs. ${item.precio} = Bs. ${item.precio * item.cantidad}\n`;
            });
            
            mensaje += `\nTotal: Bs. ${reserva.total}\n`;
            
            if (reserva.notas) {
                mensaje += `\nNotas: ${reserva.notas}\n`;
            }
            
            mensaje += `\nFecha de Reserva: ${reserva.fechaReserva}`;

            // Codificar mensaje para URL
            const mensajeCodificado = encodeURIComponent(mensaje);
            const numeroWhatsApp = '59160558736';
            const urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${mensajeCodificado}`;

            // Actualizar enlace de WhatsApp
            document.getElementById('whatsappLink').href = urlWhatsApp;

            // Mostrar modal de confirmaci√≥n
            mostrarConfirmacion(reserva);
        }

        function mostrarConfirmacion(reserva) {
            const modal = document.getElementById('modalConfirmacion');
            const mensaje = document.getElementById('mensajeConfirmacion');
            
            mensaje.textContent = `Hola ${reserva.nombre}, tu reserva por Bs. ${reserva.total} est√° lista. Haz clic en "Enviar por WhatsApp" para confirmar.`;
            modal.style.display = 'flex';
            toggleCarrito();
        }

        function cerrarModal() {
            document.getElementById('modalConfirmacion').style.display = 'none';
            // SOLO limpiar el formulario, NO el carrito
            limpiarFormulario();
        }

        function limpiarFormulario() {
            // Solo limpiamos el formulario, el carrito se mantiene
            document.getElementById('nombreCliente').value = '';
            document.getElementById('carnetCliente').value = '';
            document.getElementById('celularCliente').value = '';
            document.getElementById('fechaEntrega').value = '';
            document.getElementById('notasReserva').value = '';
        }

        function limpiarTodo() {
            // Limpiar todo (carrito + formulario) cuando se env√≠a a WhatsApp
            carrito = [];
            actualizarCarrito();
            localStorage.removeItem('carritoHilbocril');
            limpiarFormulario();
            
            // Mostrar notificaci√≥n
            mostrarNotificacion('¬°Listo para nueva reserva!', 'Tu carrito ha sido limpiado para una nueva reserva', 'exito');
            
            // Cerrar modal
            document.getElementById('modalConfirmacion').style.display = 'none';
        }

        // Configurar fecha m√≠nima para entrega (ma√±ana)
        function configurarFechaMinima() {
            const fechaInput = document.getElementById('fechaEntrega');
            const hoy = new Date();
            const manana = new Date(hoy);
            manana.setDate(hoy.getDate() + 1);
            
            const fechaMinima = manana.toISOString().split('T')[0];
            fechaInput.min = fechaMinima;
        }

        // B√∫squeda en tiempo real
        document.getElementById('buscadorInput').addEventListener('input', buscarProductos);

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            inicializarProductos();
            actualizarCarrito();
            configurarFechaMinima();
        });
    </script>
</body>
</html>
